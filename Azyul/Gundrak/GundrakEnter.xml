<If Condition="Me.MapId != 604 &amp;&amp; Me.FreeBagSlots &gt;= Settings.Instance.VendorMinBagSlots" >
	<If Condition="Me.Location.Distance(new WoWPoint(6944.809, -4426.977, 450.8831)) &gt; 300 " >
		<CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, &quot;[Azyul]: Heading to Instance.&quot;);" />
	</If>

<CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, &quot;Moving to position 1 &quot;);" />
	<MoveTo Nav="Fly" X="6959.817" Y="-4418.588" Z="443.6469" /> 
	

		<If Condition="(Me.HasAura(783))">
			
			<CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, &quot;We're currently flying&quot;);" />
	
			<CustomBehavior File="MyCTM" X="6973.58" Y="-4400.046" Z="441.5751" TerminateWhen="Me.IsInInstance" />
			
			<CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, &quot;Cancelling fly form&quot;);" />
 	<CustomBehavior File="RunMacro" Macro="/cancelform" />
 	
	<CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, &quot;We're currently flying, position 3&quot;);" />
	<CustomBehavior File="GoThruPortal" Timeout="30000" X="6968.59" Y="-4404.028" Z="442.5896" />

 <Else>
 	
 	
 	<CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, &quot;Moving to position 2&quot;);" />
 	<CustomBehavior File="MyCTM" X="6973.58" Y="-4400.046" Z="441.5751" TerminateWhen="Me.IsInInstance" />
 <CustomBehavior File="GoThruPortal" Timeout="30000" X="6968.59" Y="-4404.028" Z="442.5896" />
   
 </Else>
</If>





	<CustomBehavior File="WaitTimer" WaitTime="10000" TerminateWhen="Me.IsInInstance" />
</If>



